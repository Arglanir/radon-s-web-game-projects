Spécifications

Fichiers :

jeu.html : contient une interface de jeu javascript, crée le jeu chez le client et le laisse jouer
	communique avec ajax avec jeu.php
	paramètres GET :
		j	nom du joueur courant
		p	numéro de la partie
		s	son
		pw	optionnel : mot de passe
		offline	jouer sans le serveur (tous sur la même fenêtre)

jeu.php : interface avec le fichier de jeu
	reçoit les requêtes de jeu, regarde si c'est bon et accepte ou non la requete et agit en conséquence
	reçoit la requête de mise à jour de son propre jeu
	reçoit la requête de plateau de jeu et le renvoie
	paramètres GET :
		p	numéro de la partie
		j	joueur envoyant la requête
		pw	mot de passe du joueur
		a	genre d'action (n normale, c chateau, g demande de grille, m mise à jour joueur, nvp nouveau mot de passe)
		x	abscisse de l'endroit joué
		y	ordonnée de l'endroit joué
		k	si a=m, joueur dont on veut connaître la dernière action
				si k=0, on veut savoir le no du joueur en cours
			si a=n ou c, k=0 => ne pas traiter la requete
			si a=nvp k=nouveau mot de passe
	renvoie une chaîne xml
		si a=nvp et k=nouveau mot de passe
			<reponse><action traitee="oui"/"non" /></reponse>
		si a=n ou a=c
			requête possible ?, traitée ?
			<reponse><action autorisee="oui"/"non" traitee="oui"/"non"/></reponse>
		si a=g
			(non XML) toute la grille à jour
		si a=m
			derniers paramètres acceptés de : a de k, x de k et y de k et le no du tour
			<reponse><a valeur="n"/"c" /><x valeur=x /><y valeur=y /><n valeur=noTour /><k valeur=k /></reponse>
			ou no du joueur en cours et le no du tour
			<reponse><n valeur=noTour /><k valeur=k /></reponse>

		
ia.php : cherche le plateau de jeu et joue à la place d'un joueur, appelée par jeu.php ou jeu.html
	communique rapidement avec jeu.php
	paramètres GET :
		j	nom du joueur à remplacer
		p	numéro de la partie
		n	niveau de l'intelligence

image.php : crée une image de case
	paramètres GET :
		c	couleur RRGGBB
		n	nombre de cellules
		h	chateau ? 1/0
		d	décor 0/1/2/3
		m	max atteint ? 1/0

campagne.php : contient des parties sous le même format que les niveaux aopMMMMMM.lvl, avec des textes
	paramètres GET :
		n	numéro de campagne
		p	partie

index.php : accueil du jeu, montre les parties en cours et a le formulaire pour la création d'une partie

admin.php : montre les parties en cours, permet de les supprimer

creajeu.php : crée un jeu
	Dans les noms des joueurs, les espaces et les \n sont remplacés par _
	crée une partie de rien, avec des paramètre envoyés en POST
	crée une partie à partir d'une grille de base
	affiche le n° de la partie créée avec les liens pour les joueurs humains

numéros des parties dans lespartiesencours.xml
	<parties>
		<partie numero=numero cachee=0/1 nbjoueurs=N>
			<joueur numero=1 nom=nom1 />
			<joueur numero=2 nom=nom2 />
		</partie>
		...
	</parties>
	
grilles de base sous le nom aopMMMMMM.lvl
	Nombre de joueurs
	Taille X
	Taille Y
	Tableau de décor (0 rien 1 glace 2 chaud 3 obstacle)*100000 +10000:chateau?  +N*100:case au joueur N +XX:nombre de cellules
	Commentaires (si dans une campagne, la première ligne est numéro de la mission/nombre de missions)

parties sous le nom aopNNNNNNbacteries.par, délimiteurs : \t et \n
	Nombre de joueurs
	N°Joueur en cours entre 1 et NbJoueurs
	Nom joueur 1	couleur	option : motdepasse	
	Nom joueur 2	couleur	option : motdepasse	option : estIA?
0	Dernière action joueur 1 : a x y tour
0	Dernière action joueur 2 : a x y tour
	Options : chateaux activés ? 1/0
		Profondeur de jeu
		Bord bloqués ?	1/0/2:monde rond
		Ajout diagonale ? 1/0  (peut-on cliquer en diagonale ou seulement à côté ?)
		Explosion slt pour joueur en cours ? 1/0
	Taille X
	Taille y
	Tableau de décor - 0 rien 1 glace 2 chaud 3 obstacle
	Tableau de jeu - +10000 : chateau  +N00 : case au joueur N +XX : nombre de cellules
0	n° du tour



règles :
	une case "explose" s'il y a autant ou plus de cellules dans la case que de cases accessibles autour
	membrane : on peut ajouter des cellules jusqu'à 99 (ensuite surpopulation !)
		si attaqué et que XX < 10 alors devient case normale conquise (explose)
		si attaqué et XX >= 10 alors XX--
		on peut désolidariser une membrane, la case redevient normale (explose)
		ne peut être construite seulement sur terrain stable (0)
	décor :
		1 glace :
			il faut 2 explosions pour que ça ajoute une cellule effectivement et que la case soit conquise (1 cellule ajoutée perdue)
			on peut cliquer sur la case, ajoutant une cellule, on ne peut pas ajouter de cellule pour que la case explose
		2 chaud :
			ajouter une cellule en ajoute 2
			si une case explose à côté, 2 cellules sont ajoutées
		3 obstacle :
			on ne peut pas ajouter de cellule
			une case à côté explose à -1 (pas de cellules ajoutées)
	temps réel : si une case (x,y) est conquise par n joueurs en même temps, elle appartiendra au joueur (entre 0 et n-1, à replacer) x+TX*y modulo n
	